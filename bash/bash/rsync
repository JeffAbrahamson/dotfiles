#
# rsync
#

# EXCLUDE=--exclude-from=$HOME/.rsync-backup-exclude
# RSYNC="rsync -va --delete $EXCLUDE"

sync-to-here() {
    vol=$1
    if [ ! -d $vol ]; then
	echo "$vol not mounted?"
    else
	time rsync -va --delete jeff@fileserver:/d2/jeff/ $vol/backup/
    fi
}

sync-backup640() { sync-to-here /media/jeff/Backup640; }
sync-red640() { sync-to-here /media/jeff/Red-640; }
sync-portable-640() { sync-to-here /media/jeff/Portable640; }
sync-Black750() { sync-to-here /media/jeff/Black750; }
sync-Black-1500() { sync-to-here /media/jeff/Black-1500; }

sync-jeff-1TB-1() { sync-to-here /media/jeff/jeff-1TB-1/; }
sync-jeff-1TB-2() { sync-to-here /media/jeff/jeff-1TB-2/; }

# These exclusions are junk/cache, things that I already synchronize
# with unison (cf. $HOME/.unison/{common,*prf}) or otherwise cache
# from the fileserver, or remote filesystems.
declare -a machine_exclusions_
machine_exclusions_=( .cache .macromedia Videos brunhilde fs common data Documents Downloads templates Music work)
machine_exclusions_pattern_=
for me in ${machine_exclusions_[*]}; do
    machine_exclusions_pattern_="$machine_exclusions_pattern_ --exclude $me/"
done
sync-machine() { 
    time rsync -va --delete $machine_exclusions_pattern_ $HOME/ jeff@fileserver:/d2/jeff/machines/$HOSTNAME/;
}

sync-fileserver() { sync-data; time rsync -a fileserver:data/ $HOME/data/hosts/fileserver/; sync-data; }
sync-data() { time unison -auto data; }
sync-fast() { time unison -auto fast; }
sync-full() { time unison -auto full; }

fog() { ssh manx.misty.com; }

## blog.purple.com
blog-down() { time rsync -va --delete --exclude common purple@blog.purple.com:./ $HOME/public_html/purple/blog/; }

