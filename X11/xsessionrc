if [ "X$DESKTOP_SESSION" = Xi3 ]; then
    # It seems dunst is started automatically.  This is good, since
    # calling notify-send when dunst is not running will also start
    # dunst.
    i3-gtd &
    # Launch nm-applet with a slight delay so that the accessibility
    # bus is available.
    (sleep 2; nm-applet) &
    xautolock -detectsleep \
	-time 3 -locker "i3lock --dpms --color=220022 --inactivity-timeout 10 --nofork" \
	-notify 30 \
	-notifier "notify-send -u critical -t 10000 -- 'LOCKING screen in 30 seconds'" \
	-notify 10 \
	-notifier "notify-send -u critical -t 3000 -- 'LOCKING screen in 10 seconds'" \
	-notify 5 \
	-notifier "notify-send -u critical -t 3000 -- 'LOCKING screen in 10 seconds'" &
    redshift &
    if [ "X$HOSTNAME" = Xstarshine -o "X$HOSTNAME" = Xnantes ]; then
       # If I'm running on a laptop, run the power monitor.
        (sleep 2; i3-power-monitor 30 daemon) &
    fi
    if [ "X$HOSTNAME" = Xstarshine ]; then
       # If I have a retina display, use it.
       xrandr --dpi 192
       # Lock the screen and suspend when I close the lid.
       i3-lid-monitor &
       synclient TapButton3=2
       # Disable light tap on the touchpad, as it moves the mouse as
       # my fingers accidentally touch the touchpad while typing.  Tap
       # on the touchscreen and mouse down still work as intended.
       synclient TapButton1=0
       touchegg &
    fi
fi
